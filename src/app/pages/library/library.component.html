<h2>
  Library  
</h2>
<!-- cards$ = {{ cards$ | async | json }} -->
<div class="page">
  <div class="list" *ngIf="cards.length">
  <!-- <div class="list" *ngIf="cards$ | async as cards"> -->
    <div class="card-wrapper" *ngFor="let card of cards" (click)="selectCard(card)">
      {{card.id}}
      <div class="card">
        <img [src]="'/assets/images/cards/' + card.image">
      </div>
    </div>
  

    <div style="margin: 30px 0;">
      <bf-btn bfText="New Card" (bfClick)="newCard()"></bf-btn>
    </div>
  </div>
  
  <div class="details">
    <div *ngIf="selectedCard">
      <h3>Details: {{selectedCard.id}}</h3>
      <img [src]="'/assets/images/cards/' + selectedCard.image">
      <div *ngIf="!isEdit" style="margin-top: 15px;">
        <div style="display: flex; margin: 5px 0;">
          <div style="flex: 1"><b>Name:</b>  {{selectedCard.name}}</div>
          <div style="flex: 1"><b>Image:</b> {{selectedCard.image}}</div>
        </div>
        <div style="display: flex; margin: 5px 0;">
          <div style="flex: 1"><b>Color:</b> {{selectedCard.color}}</div>
          <div style="flex: 1"><b>Type:</b>  {{selectedCard.type}}</div>
        </div>
        <p><b>Cast:</b>  {{selectedCard.cast | json}} <span> = </span>
          <span *ngFor="let m of numArr(selectedCard.cast[0])" class="mana"> <img src="assets/images/oneMana.png">  </span>
          <span *ngFor="let m of numArr(selectedCard.cast[1])" class="mana"> <img src="assets/images/blueMana.png"> </span>
          <span *ngFor="let m of numArr(selectedCard.cast[2])" class="mana"> <img src="assets/images/whiteMana.png"></span>
          <span *ngFor="let m of numArr(selectedCard.cast[3])" class="mana"> <img src="assets/images/blackMana.png"></span>
          <span *ngFor="let m of numArr(selectedCard.cast[4])" class="mana"> <img src="assets/images/redMana.png">  </span>
          <span *ngFor="let m of numArr(selectedCard.cast[5])" class="mana"> <img src="assets/images/greenMana.png"></span>        
        </p>
        <p *ngIf="selectedCard.type === 'creature'"><b>Force:</b> {{selectedCard.attack}} / {{selectedCard.defense}}</p>
        <p><b>Text:</b> {{selectedCard.text}}</p>
        <bf-btn bfText="Edit" (bfClick)="isEdit = true"></bf-btn>
      </div>

      <div *ngIf="isEdit">
        <div style="display: flex;">
          <bf-input bfLabel="Name"  [(ngModel)]="selectedCard.name" style="margin-right: 15px;"></bf-input>
          <bf-input bfLabel="Image" [(ngModel)]="selectedCard.image"></bf-input>
        </div>

        <div style="display: flex;">
          <bf-label style="flex: 1" bfText="Cast" class="block"></bf-label>
          <bf-input style="flex: 1" bfLabel="X"      [(ngModel)]="selectedCard.cast[0]"></bf-input>
          <bf-input style="flex: 1" bfLabel="Blue"   [(ngModel)]="selectedCard.cast[1]"></bf-input>
          <bf-input style="flex: 1" bfLabel="White"  [(ngModel)]="selectedCard.cast[2]"></bf-input>
          <bf-input style="flex: 1" bfLabel="Black"  [(ngModel)]="selectedCard.cast[3]"></bf-input>
          <bf-input style="flex: 1" bfLabel="Red"    [(ngModel)]="selectedCard.cast[4]"></bf-input>
          <bf-input style="flex: 1" bfLabel="Green"  [(ngModel)]="selectedCard.cast[5]"></bf-input>
        </div>

        <div style="display: flex;">
          <bf-dropdown bfLabel="Color" style="margin-right: 15px;"
               [(ngModel)]="selectedCard.color"
               bfRender="value"
               bfSelect="value"
               [bfRequired]="true"
               [bfList]="colors">
          </bf-dropdown>
          <bf-dropdown bfLabel="Type"
               [(ngModel)]="selectedCard.type"
               bfRender="value"
               bfSelect="value"
               [bfRequired]="true"
               [bfList]="cardTypes">
          </bf-dropdown>
          <bf-input *ngIf="selectedCard.type === 'creature'" style="margin-left: 15px;" bfLabel="Attack" [(ngModel)]="selectedCard.attack"></bf-input>
          <bf-input *ngIf="selectedCard.type === 'creature'" style="margin-left: 15px;" bfLabel="Defense" [(ngModel)]="selectedCard.defense"></bf-input>
        </div>

        <div *ngIf="selectedCard.type === 'creature'" style="margin: 0 0 8px 0;">
          <bf-checkbox style="margin-right: 10px;" bfLabel="Flying"       [(ngModel)]="selectedCard.isFlying"></bf-checkbox>
          <bf-checkbox style="margin-right: 10px;" bfLabel="Trample"      [(ngModel)]="selectedCard.isTrample"></bf-checkbox>
          <bf-checkbox style="margin-right: 10px;" bfLabel="First Strike" [(ngModel)]="selectedCard.isFirstStrike"></bf-checkbox>
          <bf-checkbox style="margin-right: 10px;" bfLabel="Haste"        [(ngModel)]="selectedCard.isHaste"></bf-checkbox>
          <bf-checkbox style="margin-right: 10px;" bfLabel="Wall"         [(ngModel)]="selectedCard.isWall"></bf-checkbox>
        </div>

        <div *ngIf="selectedCard.type === 'creature'" style="display: flex; margin: 0 0 8px 0;">
          <bf-dropdown bfLabel="Color Protection" class="flat"
                [(ngModel)]="selectedCard.colorProtection"
                bfRender="value"
                bfSelect="value"
                [bfList]="colors">
          </bf-dropdown>
        </div>


        <bf-input bfLabel="Text" [(ngModel)]="selectedCard.text"></bf-input>

        
        <div style="text-align: right;">
          <bf-checkbox bfLabel="Ready to play" [(ngModel)]="selectedCard.readyToPlay" style="margin-right: 100px;"></bf-checkbox>
          <bf-btn bfText="Cancel" (bfClick)="isEdit = false" class="secondary" style="margin-right: 15px;"></bf-btn>
          <bf-btn bfText="Save Details" (bfClick)="saveCard(selectedCard)"></bf-btn>
        </div>
      </div>
    </div>
  </div>

  
</div>