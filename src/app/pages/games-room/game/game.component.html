<div class="game" *ngIf="!!state">
  <div class="left-panel">
    <div class="player-B">

      <div class="left">
        <div class="deck">
          <div class="deck-card">
            <img [src]="'/assets/images/cards/card_back.jpg'">
            <div class="deck-count">{{deckBCount}}</div>
          </div>
          <div class="grav-card empty">
            <img [src]="'/assets/images/cards/empty.png'">
          </div>
        </div>
  
        <div class="life">20</div>
      </div>

      <div class="mana-pool">
        <div class="mana"> <img src="assets/images/Xmana.png">    <span>0</span> </div>
        <div class="mana"> <img src="assets/images/blueMana.png"> <span>0</span> </div>
        <div class="mana"> <img src="assets/images/whiteMana.png"><span>0</span> </div>
        <div class="mana"> <img src="assets/images/blackMana.png"><span>0</span> </div>
        <div class="mana"> <img src="assets/images/redMana.png">  <span>0</span> </div>
        <div class="mana"> <img src="assets/images/greenMana.png"><span>0</span> </div>
      </div>

    </div>



    <div class="full-card">
      <div class="card-border">
        <img [src]="'assets/images/cards/' + fullCardImg"/>
      </div>
    </div>

    <div class="player-A">
      <div class="left">
        <div class="life">20</div>

        <div class="deck">
          <div class="deck-card" [class.selectable-card]="canIDraw" (click)="drawCard()">
            <img [src]="'/assets/images/cards/card_back.jpg'">
            <div class="deck-count">{{deckACount}}</div>
          </div>
          <div class="grav-card">
            <img [src]="'/assets/images/cards/fork.jpg'">
          </div>
        </div>

      </div>

      <div class="mana-pool">
        <div class="mana"> <img src="assets/images/Xmana.png">    <span>0</span> </div>
        <div class="mana"> <img src="assets/images/blueMana.png"> <span>0</span> </div>
        <div class="mana"> <img src="assets/images/whiteMana.png"><span>0</span> </div>
        <div class="mana"> <img src="assets/images/blackMana.png"><span>0</span> </div>
        <div class="mana"> <img src="assets/images/redMana.png">  <span>0</span> </div>
        <div class="mana"> <img src="assets/images/greenMana.png"><span>0</span> </div>
      </div>
    </div>

  </div>


  <!-- --------------------------------------------------------------------------------------------- -->
  <!-- --------------------------------------------------------------------------------------------- -->
  <!-- --------------------------------------------------------------------------------------------- -->


  <div class="board-panel">
    <div class="player-B">
      <div class="phases-box">
        <div class="phase untap"       [class.selected]="phase === 'B.untap'">       <span class="icon-undo2"> </span></div>
        <div class="phase maintenance" [class.selected]="phase === 'B.maintenance'"> <span class="icon-hammer"></span></div>
        <div class="phase draw"        [class.selected]="phase === 'B.draw'">        <span class="icon-hand">  </span></div>
        <div class="phase pre-combat"  [class.selected]="phase === 'B.pre'">         <span class="icon-moon">  </span></div>
        <div class="phase combat"      [class.selected]="phase === 'B.combat'">      <span class="icon-sword"> </span></div>
        <div class="phase post-combat" [class.selected]="phase === 'B.post'">        <span class="icon-moon">  </span></div>
        <div class="phase discard"     [class.selected]="phase === 'B.discard'">     <span class="icon-hand">  </span></div>
        <div class="phase end"         [class.selected]="phase === 'B.end'">         <span class="icon-fire">  </span></div>
      </div>

      <div class="hand-box" [class.expanded]="isHandBExp">
        <div class="box-button" (click)="isHandBExp = !isHandBExp">
          <span [class.hide]="isHandBExp" class="icon-arrow-down22"></span>
          <span [class.hide]="!isHandBExp" class="icon-arrow-up22"></span>
        </div>
        <div *ngFor="let card of handB" class="hand-card" [class.back-card]="true">
          <img [src]="'/assets/images/cards/card_back.jpg'">
        </div>
      </div>

      <div class="play-box"
           bfDropContainer
          (bfDrop)="moveCardPosition($event)" 
          (dblclick)="autoPositionGameCards()">
        <div *ngFor="let card of tableB"
              class="play-card"
              [style.left.px]="card.posX"
              [style.top.px]="card.posY"
              [style.z-index]="card.zInd"
              [bfDraggable]="card"
              (dragstart)="dragStart($event, card)"
              (click)="focusPlayCard(card)"
              (mouseover)="fullCardImg = card.image">
          <img [src]="'/assets/images/cards/' + card.image">
        </div>
      </div>

      <div style="position: absolute; left: 100px; bottom: 30px;">
        INFO = {{ info }}
        <br/>
        <button (click)="skipPhase()">SKIP PHASE</button>
        <br/>
        phase$={{phase}}
        <br/>
        options = {{state.options | json}}
        <br/>
      </div>

    </div>

    <!-- <div class="info-box">
      ---------------------------------------------------------------------------------------------
    </div> -->

    <div class="player-A">


      <div class="phases-box">
        <div class="phase untap"       [class.selected]="phase === 'A.untap'">       <span class="icon-undo2"> </span></div>
        <div class="phase maintenance" [class.selected]="phase === 'A.maintenance'"> <span class="icon-hammer"></span></div>
        <div class="phase draw"        [class.selected]="phase === 'A.draw'">        <span class="icon-hand">  </span></div>
        <div class="phase pre-combat"  [class.selected]="phase === 'A.pre'">         <span class="icon-moon">  </span></div>
        <div class="phase combat"      [class.selected]="phase === 'A.combat'">      <span class="icon-sword"> </span></div>
        <div class="phase post-combat" [class.selected]="phase === 'A.post'">        <span class="icon-moon">  </span></div>
        <div class="phase discard"     [class.selected]="phase === 'A.discard'">     <span class="icon-hand">  </span></div>
        <div class="phase end"         [class.selected]="phase === 'A.end'">         <span class="icon-fire">  </span></div>
      </div>

      <div class="hand-box" [class.expanded]="isHandAExp">
        <div class="box-button" (click)="isHandAExp = !isHandAExp">
          <span [class.hide]="isHandAExp" class="icon-arrow-down22"></span>
          <span [class.hide]="!isHandAExp" class="icon-arrow-up22"></span>
        </div>
        <div *ngIf="!handA.length" class="no-cards">No Cards</div>
        <div *ngFor="let card of handA" 
              class="hand-card" [class.selectable-card]="!!card.selectableAction"
             (click)="selectCardFromYourHand(card)"
             (mouseover)="hoverHandCard(card)"
             (mouseleave)="info=''">
          <img [src]="'/assets/images/cards/' + card.image">
        </div>
      </div>

      <div class="play-box"
           bfDropContainer
           (bfDrop)="moveCardPosition($event)" 
           (dblclick)="autoPositionGameCards()">

        <!-- isDragging={{bfDnD.isDragging}} -->
        <!-- activeContainer={{bfDnD.activeContainer | json}} -->
        <div *ngFor="let card of tableA" 
             class="play-card"
             [style.left.px]="card.posX"
             [style.top.px]="card.posY"
             [style.z-index]="card.zInd"
             [bfDraggable]="card"
             (dragstart)="dragStart($event, card)"
             (click)="focusPlayCard(card)"
             (mouseover)="fullCardImg = card.image">
          <img [src]="'/assets/images/cards/' + card.image">
          <div style="position: absolute;">
            order={{card.order}}
            <br>x={{card.posX}}, y={{card.posY}}, z={{card.zInd}}
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
